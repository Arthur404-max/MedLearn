<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–¥–ø–∏—Å–∫–∏ - MedLearn</title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ñ–∞–∫—Ç—ã –Ω–∞ —Ñ–æ–Ω–µ -->
    <div class="medical-facts-bg">
        <div class="medical-fact">–ê–Ω—Ç–∏–±–∏–æ—Ç–∏–∫–∏ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã –ø—Ä–æ—Ç–∏–≤ –≤–∏—Ä—É—Å–Ω—ã—Ö –∏–Ω—Ñ–µ–∫—Ü–∏–π</div>
        <div class="medical-fact">–ß–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –æ—Ä–≥–∞–Ω–∏–∑–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç 25 –º–∏–ª–ª–∏–æ–Ω–æ–≤ –Ω–æ–≤—ã—Ö –∫–ª–µ—Ç–æ–∫ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É</div>
        <div class="medical-fact">–ü–µ—á–µ–Ω—å –º–æ–∂–µ—Ç —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ 75% —Å–≤–æ–µ–π –º–∞—Å—Å—ã</div>
        <div class="medical-fact">–ß–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –º–æ–∑–≥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 20% –≤—Å–µ–π —ç–Ω–µ—Ä–≥–∏–∏ –æ—Ä–≥–∞–Ω–∏–∑–º–∞</div>
        <div class="medical-fact">–í –æ—Ä–≥–∞–Ω–∏–∑–º–µ —á–µ–ª–æ–≤–µ–∫–∞ –±–æ–ª—å—à–µ –±–∞–∫—Ç–µ—Ä–∏–π, —á–µ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–ª–µ—Ç–æ–∫</div>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navbar">
        <div class="navbar-content">
                        <a href="dashboard.html" class="logo" style="text-decoration: none; color: inherit;">üè• MedLearn</a>
            <div class="nav-links">
                <a href="dashboard.html">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
                <a href="testing.html">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
                <a href="resources.html">–†–µ—Å—É—Ä—Å—ã</a>
                <a href="profile.html">–ü—Ä–æ—Ñ–∏–ª—å</a>
                <button onclick="logout()" class="btn btn-secondary">–í—ã–π—Ç–∏</button>
            </div>
        </div>
    </nav>

    <div class="app-container">
        <div class="page-header">
            <h1>‚≠ê –ü–æ–¥–ø–∏—Å–∫–∏ –∏ —Ç–∞—Ä–∏—Ñ—ã</h1>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø–ª–∞–Ω –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –º–µ–¥–∏—Ü–∏–Ω—ã</p>
        </div>

        <div class="content-wrapper">
            <!-- –¢–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ -->
            <div class="card" style="margin-bottom: 2rem;">
                <div class="card-header">
                    <h2 class="card-title">üìã –¢–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞</h2>
                    <p class="card-subtitle">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—à–µ–º –ø–ª–∞–Ω–µ</p>
                </div>
                <div class="card-body">
                    <div class="grid grid-2" style="align-items: center;">
                        <div>
                            <h3 style="color: var(--primary-color); margin-bottom: 0.5rem;" id="currentPlan">–ó–∞–≥—Ä—É–∑–∫–∞...</h3>
                            <p style="color: var(--text-secondary); margin-bottom: 1rem;" id="planDescription">–û–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞–Ω–∞</p>
                            <div style="font-size: 0.9rem; color: var(--text-light);">
                                <div>üìÖ –î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: <span id="planExpiry">-</span></div>
                                <div>üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: <span id="planPrice">-</span></div>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="display: inline-block; padding: 0.5rem 1rem; background: var(--success-gradient); color: white; border-radius: 20px; font-weight: 500;" id="planStatus">
                                ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ü–ª–∞–Ω—ã –ø–æ–¥–ø–∏—Å–æ–∫ -->
            <div class="grid grid-3">
                <!-- –ë–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω -->
                <div class="card subscription-plan" data-plan="basic">
                    <div class="card-header" style="text-align: center; background: var(--bg-secondary);">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üìö</div>
                        <h3 class="card-title">–ë–∞–∑–æ–≤—ã–π</h3>
                        <p class="card-subtitle">–î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</p>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--primary-color); margin-top: 1rem;">
                            299‚ÇΩ <span style="font-size: 1rem; font-weight: 400; color: var(--text-secondary);">/—Å–µ–º–µ—Å—Ç—Ä</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <ul style="list-style: none; padding: 0; margin-bottom: 2rem;">
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ç–µ—Å—Ç–∞–º
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –ë–∞–∑–æ–≤—ã–µ —É—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center; opacity: 0.5;">
                                <span style="color: var(--text-light); margin-right: 0.5rem;">‚ùå</span>
                                AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center; opacity: 0.5;">
                                <span style="color: var(--text-light); margin-right: 0.5rem;">‚ùå</span>
                                –ü—Ä–µ–º–∏—É–º —Ä–µ—Å—É—Ä—Å—ã
                            </li>
                        </ul>
                        <button class="btn btn-primary" onclick="selectPlan('basic', 299)" style="width: 100%;">
                            –í—ã–±—Ä–∞—Ç—å –ø–ª–∞–Ω
                        </button>
                    </div>
                </div>

                <!-- –ü—Ä–µ–º–∏—É–º –ø–ª–∞–Ω -->
                <div class="card subscription-plan featured" data-plan="premium" style="position: relative; border: 2px solid var(--primary-color);">
                    <div style="position: absolute; top: -10px; left: 50%; transform: translateX(-50%); background: var(--primary-gradient); color: white; padding: 0.25rem 1rem; border-radius: 20px; font-size: 0.8rem; font-weight: 600;">
                        –ü–û–ü–£–õ–Ø–†–ù–´–ô
                    </div>
                    <div class="card-header" style="text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">‚≠ê</div>
                        <h3 class="card-title" style="color: white;">–ü—Ä–µ–º–∏—É–º</h3>
                        <p style="opacity: 0.9;">–î–ª—è —Å–µ—Ä—å–µ–∑–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</p>
                        <div style="font-size: 2rem; font-weight: 700; margin-top: 1rem;">
                            599‚ÇΩ <span style="font-size: 1rem; font-weight: 400; opacity: 0.8;">/—Å–µ–º–µ—Å—Ç—Ä</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <ul style="list-style: none; padding: 0; margin-bottom: 2rem;">
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ë–∞–∑–æ–≤–æ–≥–æ
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç 24/7
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –ü—Ä–µ–º–∏—É–º —Ä–µ—Å—É—Ä—Å—ã
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                            </li>
                        </ul>
                        <button class="btn btn-primary" onclick="selectPlan('premium', 599)" style="width: 100%; background: var(--primary-gradient);">
                            –í—ã–±—Ä–∞—Ç—å –ø–ª–∞–Ω
                        </button>
                    </div>
                </div>

                <!-- –ì–æ–¥–æ–≤–æ–π –ø–ª–∞–Ω -->
                <div class="card subscription-plan" data-plan="yearly">
                    <div class="card-header" style="text-align: center; background: var(--warning-gradient); color: white;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üèÜ</div>
                        <h3 class="card-title" style="color: white;">–ì–æ–¥–æ–≤–æ–π</h3>
                        <p style="opacity: 0.9;">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è</p>
                        <div style="font-size: 2rem; font-weight: 700; margin-top: 1rem;">
                            999‚ÇΩ <span style="font-size: 1rem; font-weight: 400; opacity: 0.8;">/–≥–æ–¥</span>
                        </div>
                        <div style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;">
                            –≠–∫–æ–Ω–æ–º–∏—è 1200‚ÇΩ!
                        </div>
                    </div>
                    <div class="card-body">
                        <ul style="list-style: none; padding: 0; margin-bottom: 2rem;">
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ü—Ä–µ–º–∏—É–º
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –ì–æ–¥–æ–≤–æ–π –¥–æ—Å—Ç—É–ø
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –ë–µ–∑ —Ä–µ–∫–ª–∞–º—ã
                            </li>
                            <li style="padding: 0.5rem 0; display: flex; align-items: center;">
                                <span style="color: var(--success-color); margin-right: 0.5rem;">‚úÖ</span>
                                –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è
                            </li>
                        </ul>
                        <button class="btn btn-primary" onclick="selectPlan('yearly', 999)" style="width: 100%; background: var(--warning-gradient);">
                            –í—ã–±—Ä–∞—Ç—å –ø–ª–∞–Ω
                        </button>
                    </div>
                </div>
            </div>

            <!-- FAQ -->
            <div class="card" style="margin-top: 3rem;">
                <div class="card-header">
                    <h2 class="card-title">‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h2>
                    <p class="card-subtitle">–û—Ç–≤–µ—Ç—ã –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ –ø–æ–¥–ø–∏—Å–∫–∞—Ö</p>
                </div>
                <div class="card-body">
                    <div class="grid">
                        <details style="border: 1px solid #e2e8f0; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                            <summary style="cursor: pointer; font-weight: 600; color: var(--primary-color);">
                                –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É?
                            </summary>
                            <p style="margin-top: 1rem; color: var(--text-secondary);">
                                –î–∞, –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è. –î–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞.
                            </p>
                        </details>
                        
                        <details style="border: 1px solid #e2e8f0; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                            <summary style="cursor: pointer; font-weight: 600; color: var(--primary-color);">
                                –ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç?
                            </summary>
                            <p style="margin-top: 1rem; color: var(--text-secondary);">
                                AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –º–µ–¥–∏—Ü–∏–Ω–µ, –æ–±—ä—è—Å–Ω—è–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏, –ø–æ–º–æ–≥–∞–µ—Ç —Å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º –∏ –¥–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.
                            </p>
                        </details>
                        
                        <details style="border: 1px solid #e2e8f0; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                            <summary style="cursor: pointer; font-weight: 600; color: var(--primary-color);">
                                –ï—Å—Ç—å –ª–∏ —Å–∫–∏–¥–∫–∏ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤?
                            </summary>
                            <p style="margin-top: 1rem; color: var(--text-secondary);">
                                –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Å–µ –Ω–∞—à–∏ —Ü–µ–Ω—ã —É–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∞–∫—Ü–∏—è–º–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏!
                            </p>
                        </details>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
    <div id="subscriptionModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center;">
        <div class="card" style="max-width: 500px; margin: 2rem;">
            <div class="card-header">
                <h2 class="card-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏</h2>
            </div>
            <div class="card-body">
                <p id="modalText">–í—ã –≤—ã–±—Ä–∞–ª–∏ –ø–ª–∞–Ω...</p>
                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button onclick="closeModal()" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                    <button onclick="confirmSubscription()" class="btn btn-primary">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/client.js"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–¥–ø–∏—Å–æ–∫
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
            loadCurrentSubscription();
        });

        let selectedPlan = null;
        let selectedPrice = null;

        function selectPlan(planType, price) {
            selectedPlan = planType;
            selectedPrice = price;
            
            const planNames = {
                'basic': '–ë–∞–∑–æ–≤—ã–π',
                'premium': '–ü—Ä–µ–º–∏—É–º', 
                'yearly': '–ì–æ–¥–æ–≤–æ–π'
            };
            
            document.getElementById('modalText').textContent = 
                `–í—ã –≤—ã–±—Ä–∞–ª–∏ –ø–ª–∞–Ω "${planNames[planType]}" –∑–∞ ${price}‚ÇΩ. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–æ–∫—É–ø–∫—É.`;
            document.getElementById('subscriptionModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('subscriptionModal').style.display = 'none';
        }

        async function confirmSubscription() {
            try {
                const response = await fetch('/api/subscriptions/purchase', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${localStorage.getItem('token')}`
                    },
                    body: JSON.stringify({
                        planType: selectedPlan,
                        price: selectedPrice
                    })
                });

                if (response.ok) {
                    alert('–ü–æ–¥–ø–∏—Å–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞!');
                    closeModal();
                    loadCurrentSubscription();
                } else {
                    throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏');
                }
            } catch (error) {
                alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: ' + error.message);
            }
        }
    </script>
</body>
</html>