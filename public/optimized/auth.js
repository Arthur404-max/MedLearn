function checkAuth(){const token = localStorage.getItem('token');if(!token){window.location.href = '/';return false;}return true;}function logout(){localStorage.removeItem('token');localStorage.removeItem('user');window.location.href = '/';}async function getCurrentUser(){const token = localStorage.getItem('token');try{const response = await fetch('/api/auth/me',{headers:{'Authorization': `Bearer ${token}`}});if(response.ok){const user = await response.json();return user;}else{logout();return null;}}catch(error){console.error('Error fetching user data:',error);return null;}}document.addEventListener('DOMContentLoaded',()=>{if(window.location.pathname === '/')return;checkAuth();});