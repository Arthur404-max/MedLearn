async function loadUserData(){const user = await getCurrentUser();if(!user)return;document.getElementById('userName').textContent = user.name;document.getElementById('userEmail').textContent = user.email;document.getElementById('registrationDate').textContent = new Date(user.createdAt).toLocaleDateString();document.getElementById('subscriptionStatus').textContent = user.subscription?.plan || 'Нет активной подписки';}async function loadTestingStats(){const token = localStorage.getItem('token');try{const response = await fetch('/api/stats/testing',{headers:{'Authorization': `Bearer ${token}`}});if(response.ok){const stats = await response.json();document.getElementById('testsCompleted').textContent = stats.totalTests;document.getElementById('averageScore').textContent = `${stats.averageScore}%`;document.getElementById('bestSubject').textContent = stats.bestSubject || '-';loadRecentActivity(stats.recentActivity);}}catch(error){console.error('Error loading testing stats:',error);}}function loadRecentActivity(activities){const activityList = document.getElementById('activityList');activityList.innerHTML = '';if(!activities || activities.length === 0){activityList.innerHTML = '<p class="no-activity">Нет недавней активности</p>';return;}activities.forEach(activity =>{const activityItem = document.createElement('div');activityItem.className = 'activity-item';activityItem.innerHTML = ` <p class="activity-text">${activity.description}</p> <span class="activity-date">${new Date(activity.date).toLocaleDateString()}</span> `;activityList.appendChild(activityItem);});}async function loadAchievements(){const token = localStorage.getItem('token');try{const response = await fetch('/api/achievements',{headers:{'Authorization': `Bearer ${token}`}});if(response.ok){const achievements = await response.json();const achievementsGrid = document.getElementById('achievementsGrid');achievementsGrid.innerHTML = '';achievements.forEach(achievement =>{const achievementItem = document.createElement('div');achievementItem.className = 'achievement-item';achievementItem.innerHTML = ` <img src="${achievement.icon}" alt="${achievement.name}" class="achievement-icon"> <span class="achievement-name">${achievement.name}</span> `;achievementsGrid.appendChild(achievementItem);});}}catch(error){console.error('Error loading achievements:',error);}}function editProfile(){alert('Функция редактирования профиля будет доступна в ближайшее время');}document.addEventListener('DOMContentLoaded',()=>{loadUserData();loadTestingStats();loadAchievements();});