<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–±—Ä–æ—Å —Å–∏—Å—Ç–µ–º—ã - MedLearn</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .reset-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .reset-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }
        
        .reset-title {
            color: #2c3e50;
            font-size: 28px;
            margin-bottom: 20px;
        }
        
        .reset-description {
            color: #7f8c8d;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .reset-actions {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .reset-button {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .reset-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(231, 76, 60, 0.3);
        }
        
        .status-message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-weight: 600;
        }
        
        .success {
            background: #d5f4e6;
            color: #27ae60;
            border-left: 5px solid #27ae60;
        }
        
        .info {
            background: #e3f2fd;
            color: #1565c0;
            border-left: 5px solid #1565c0;
        }
        
        .back-button {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="reset-container">
        <div class="reset-icon">üîß</div>
        <h1 class="reset-title">–°–±—Ä–æ—Å —Å–∏—Å—Ç–µ–º—ã</h1>
        <p class="reset-description">
            –ï—Å–ª–∏ —É –≤–∞—Å –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–∞–π—Ç–æ–º (–∫—Ä–∞—Å–Ω–æ–µ –æ–∫–Ω–æ, –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏), 
            –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Å–±—Ä–æ—Å–∞ —Å–∏—Å—Ç–µ–º—ã.
        </p>
        
        <div class="reset-actions">
            <button class="reset-button" onclick="clearLocalStorage()">
                üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–∞
            </button>
            
            <button class="reset-button" onclick="clearAuthData()">
                üîë –°–±—Ä–æ—Å–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            </button>
            
            <button class="reset-button" onclick="fullReset()">
                üöÄ –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å + –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
            </button>
        </div>
        
        <div id="statusMessage" style="display: none;"></div>
        
        <button class="reset-button back-button" onclick="goHome()">
            üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é
        </button>
    </div>

    <script>
        function showMessage(text, type = 'success') {
            const messageEl = document.getElementById('statusMessage');
            messageEl.textContent = text;
            messageEl.className = `status-message ${type}`;
            messageEl.style.display = 'block';
            
            setTimeout(() => {
                messageEl.style.display = 'none';
            }, 3000);
        }
        
        function clearLocalStorage() {
            try {
                localStorage.clear();
                sessionStorage.clear();
                showMessage('‚úÖ –î–∞–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–∞ –æ—á–∏—â–µ–Ω—ã');
            } catch (error) {
                showMessage('‚ùå –û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏: ' + error.message, 'error');
            }
        }
        
        function clearAuthData() {
            try {
                localStorage.removeItem('token');
                localStorage.removeItem('user');
                localStorage.removeItem('banInfo');
                sessionStorage.clear();
                showMessage('‚úÖ –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å–±—Ä–æ—à–µ–Ω—ã');
            } catch (error) {
                showMessage('‚ùå –û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞: ' + error.message, 'error');
            }
        }
        
        function fullReset() {
            try {
                // –û—á–∏—â–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
                localStorage.clear();
                sessionStorage.clear();
                
                // –û—á–∏—â–∞–µ–º cookies
                document.cookie.split(";").forEach(function(c) { 
                    document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); 
                });
                
                showMessage('‚úÖ –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω', 'success');
                
                setTimeout(() => {
                    window.location.href = '/';
                    window.location.reload(true);
                }, 2000);
                
            } catch (error) {
                showMessage('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞: ' + error.message, 'error');
            }
        }
        
        function goHome() {
            window.location.href = '/';
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–±–ª–µ–º
        document.addEventListener('DOMContentLoaded', function() {
            const hasToken = localStorage.getItem('token');
            const hasBanInfo = localStorage.getItem('banInfo');
            const hasUserData = localStorage.getItem('user');
            
            let issues = [];
            
            if (hasBanInfo) {
                issues.push('üö´ –ù–∞–π–¥–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–Ω–µ');
            }
            
            if (hasToken && !hasUserData) {
                issues.push('‚ö†Ô∏è –¢–æ–∫–µ–Ω –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
            }
            
            if (issues.length > 0) {
                const messageEl = document.getElementById('statusMessage');
                messageEl.innerHTML = `
                    <strong>–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:</strong><br>
                    ${issues.join('<br>')}
                `;
                messageEl.className = 'status-message info';
                messageEl.style.display = 'block';
            }
        });
    </script>
</body>
</html>